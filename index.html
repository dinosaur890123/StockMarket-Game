<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Market Simulator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-900 text-gray-200 flex">

    <aside id="sidebar" class="glass-sidebar fixed top-0 left-0 h-full w-64 p-6 flex-col justify-between hidden">
        <div>
            <h1 class="text-2xl font-bold text-white mb-10">Stock Market Simulator</h1>
            <nav class="flex flex-col space-y-4">
                <a href="#" id="navDashboard" class="nav-link">
                    <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path></svg>
                    Dashboard
                </a>
                <a href="#" id="navTrade" class="nav-link active">
                    <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg>
                    Trade
                </a>
                <a href="#" id="navOrders" class="nav-link">
                    <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg>
                    My Orders
                </a>
                <a href="#" id="navLeaderboard" class="nav-link">
                    <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
                    Leaderboard
                </a>
                <a href="#" id="navAchievements" class="nav-link">
                    <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path></svg>
                    Achievements
                </a>
                <a href="#" id="navHelp" class="nav-link">
                    <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    Help
                </a>
            </nav>
        </div>
        <div id="authContainer">
        </div>
    </aside>

    <div id="appContainer" class="flex-1 transition-all duration-300">
        <div id="loginPage" class="flex items-center justify-center h-screen">
            <div class="text-center max-w-xl mx-auto">
                <svg class="mx-auto h-16 w-16 text-blue-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941" /></svg>
                <h2 class="mt-4 text-3xl font-bold tracking-tight text-white sm:text-4xl">Welcome to the Stock Market Simulator</h2>
                <p class="mt-4 text-lg leading-8 text-gray-400">Outsmart the market, react to live news, and build your trading empire from the ground up.</p>
                <div class="mt-8">
                    <button id="mainSignInButton" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg text-lg transition shadow-lg hover:shadow-xl transform hover:-translate-y-0.5">Sign In</button>
                </div>
            </div>
        </div>

        <div id="mainContent" class="hidden p-8">
            <header class="flex justify-between items-center mb-8">
                <h2 id="pageTitle" class="text-3xl font-bold text-white">Trade</h2>
                <div class="flex space-x-6 text-right">
                    <div>
                        <p class="text-xs text-gray-400">Cash</p><p id="headerCash" class="font-semibold text-green-400">$0.00</p>
                    </div>
                    <div>
                        <p class="text-xs text-gray-400">Stocks</p><p id="headerStocks" class="font-semibold text-blue-400">$0.00</p>
                    </div>
                    <div>
                        <p class="text-xs text-gray-400">Net Worth</p><p id="headerNetWorth" class="font-bold text-white">$0.00</p>
                    </div>
                </div>
            </header>

            <main id="dashboardPage" class="hidden">
                <div class="mb-8">
                    <h3 class="text-xl font-bold text-white mb-4">Live News Feed</h3>
                    <div id="newsFeedContainer" class="space-y-3 max-h-48 overflow-y-auto bg-gray-800 p-4 rounded-lg">
                        <p class="text-gray-400">Loading news...</p>
                    </div>
                </div>
            </main>
            <main id="tradePage"></main>
            <main id="ordersPage" class="hidden"></main>
            <main id="leaderboardPage" class="hidden"></main>
            <main id="achievementsPage" class="hidden"></main>
            <main id="helpPage" class="hidden prose prose-invert max-w-none bg-gray-800 p-6 rounded-lg">
                <h2>Tutorial: How to Play</h2>
                <p>Welcome to the Stock Market Simulator! The goal is to grow your net worth by buying and selling stocks in a dynamic, live market.</p>
                
                <h3>The Market</h3>
                <p>The market is constantly changing, both randomly and based off people. Stock prices update every few seconds based on their volatility, AI-generated news, and events triggered by the game admin. Keep an eye on the news feed on your dashboard for clues about what might happen next!</p>
                <h3>Order Types</h3>
                <ul>
                    <li><strong>Market Order:</strong> The simplest way to trade. A market order buys or sells a stock at the best available current price. It's fast, but the price might change slightly from what you see on the screen.</li>
                    <li><strong>Limit Order:</strong> A more advanced order where you set a specific price. A "Limit Buy" will only execute if the stock's price drops to your target price or lower. A "Limit Sell" will only execute if the price rises to your target price or higher. This is great for getting the price you want, but your order might never be filled if the price doesn't reach your target.</li>
                    <li><strong>Stop Loss:</strong> A defensive order to protect your profits or limit your losses. You set a "trigger price" below the current price. If the stock falls to that price, it automatically turns into a market sell order.</li>
                </ul>

                <h3>New Features added recently: Realism and Achievements</h3>
                <ul>
                    <li><strong>Transaction Costs:</strong> Every time you buy or sell stock, a flat <strong>$5.00 fee</strong> is deducted from your cash. This simulates real-world brokerage fees and means you need to make sure your trades are profitable enough to cover the cost.</li>
                    <li><strong>Dividends:</strong> Some companies will periodically pay dividends. If you own shares in a company when it pays a dividend, you will automatically receive a cash payment in your account for each share you own. This rewards long-term holding of valuable stocks. You'll see a pop-up message when you receive a dividend payment.</li>
                </ul>

                <h3>Tips for Success</h3>
                <ul>
                    <li><strong>Watch the News:</strong> The AI and admin-generated news events are the biggest drivers of large price swings. Reacting quickly to news is a key strategy.</li>
                    <li><strong>Diversify:</strong> Don't put all your money into one stock. Spreading your investments across different sectors can protect you if one company or sector has a downturn.</li>
                    <li><strong>Use Limit Orders:</strong> For volatile stocks, using a limit order can help you avoid paying more than you intended.</li>
                    <li><strong>Protect Yourself:</strong> Use stop-loss orders on your most valuable stocks to prevent a surprise crash from wiping out your gains.</li>
                </ul>
            </main>
            <main id="stockDetailPage" class="hidden"></main>
        </div>
    </div>

    <div id="messageBox" class="hidden fixed bottom-5 right-5 max-w-sm rounded-lg shadow-lg p-4 text-white z-50">
        <p id="messageText"></p>
    </div>

    <script type="module" src="game.js"></script>
</body>
</html>
